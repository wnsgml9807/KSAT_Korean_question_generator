---
marp: true
---

# KSAT Agent
_Multi-Agent ê¸°ë°˜ ìˆ˜ëŠ¥ êµ­ì–´ ë…ì„œ ì˜ì—­ ì¶œì œ ìë™í™” ì‹œìŠ¤í…œ_

```
ì œì‘ì : ê¶Œì¤€í¬
ì†Œì† : ì—°ì„¸ëŒ€í•™êµ êµìœ¡í•™ê³¼
ver 0.6.0 (05.07)
- ê°œë… ì§€ë„ ê¸°ë°˜ passage_editor ì „ìš© íŒŒì¸íŠœë‹ ëª¨ë¸ íƒ‘ì¬
- ì£¼ì œ ì„ íƒ ì „ë¬¸ ì—ì´ì „íŠ¸ subject_collector íƒ‘ì¬
- Docker ì´ë¯¸ì§€ ìƒì„± + Google Cloud Platform ì„œë²„ êµ¬ì¶•
```
<br>

<div align="center">
  <h3> ì§ì ‘ ì‚¬ìš©í•´ ë³´ì„¸ìš” âœ¨</h3>
  <a href="https://ksat-generator-kjh7207.streamlit.app/" target="_blank">
    <img src="https://img.shields.io/badge/KSAT_Agent_ì‹¤í–‰í•˜ê¸°-FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white" alt="KSAT Agent ì‹¤í–‰í•˜ê¸°" width="300"/>
  </a>
  <p><i>ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë°ëª¨ ì•± ë§í¬ë¡œ ì´ë™í•©ë‹ˆë‹¤. ğŸš€</i></p>
</div>
<br>

---

### 1ï¸âƒ£ ê°œìš”

ìˆ˜ëŠ¥ êµ­ì–´, íŠ¹íˆ ë…ì„œ ì§€ë¬¸ì˜ ì¶œì œì—ëŠ” ìƒë‹¹í•œ ì‹œê°„ê³¼ ë¹„ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.

KSAT AgentëŠ” ê³ í’ˆì§ˆì˜ ìˆ˜ëŠ¥ êµ­ì–´ ë…ì„œ ì§€ë¬¸ ì„¸íŠ¸ë¥¼ **ì•½ 10ë¶„ ì•ˆì—** ì™„ì„±í•˜ì—¬ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ìëŠ” AIì™€ í•¨ê»˜ ì›í•˜ëŠ” ì£¼ì œë¥¼ ì„¬ì„¸í•˜ê²Œ ê²°ì •í•œ í›„, ë‚˜ë¨¸ì§€ ì¶œì œ ê³¼ì •ì€ AI ì—ì´ì „íŠ¸ë“¤ì´ ë¶„ë‹´í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

### 2ï¸âƒ£ íš¨ê³¼ì„±

ê¸°ì¡´ ì¶œì œ í”„ë¡œì„¸ìŠ¤ë¥¼ í¬ê²Œ ë‹¨ì¶•í•˜ê³ , ìƒë‹¹í•œ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### ê¸°ì¡´ ì¶œì œ í”„ë¡œì„¸ìŠ¤

| ê¸°ì¡´ ì¶œì œ ê³¼ì • | ì£¼ìš” ë¬¸ì œì  |
|----------------|------------|
| **ì¶œì œ ê¸°ê°„** | ì´ˆì•ˆ ì‘ì„± â†’ ê²€í†  â†’ ìˆ˜ì •ì´ ë°˜ë³µë˜ì–´ 1~2ê°œì›”ì˜ ì‹œê°„ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤. |
| **ë†’ì€ ì¶œì œ ë¹„ìš©** | ì§€ë¬¸ ì„¸íŠ¸ë‹¹ ë°±ë§Œ ì› ì´ìƒì˜ ë†’ì€ ì›ê³ ë£Œë¥¼ ì§€ë¶ˆí•´ì•¼ í•©ë‹ˆë‹¤. |
| **ì„œë©´ ìœ„ì£¼ ì˜ì‚¬ì†Œí†µ** | ì¶œì œìì™€ ê²€í† ìê°€ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” êµ¬ì¡°ë¡œ ì¸í•´, ì˜ê²¬ êµí™˜ì— ì œí•œì´ ìˆê³  ì¦‰ê°ì ì¸ í”¼ë“œë°±ì´ ì–´ë µìŠµë‹ˆë‹¤. |


##### KSAT Agent í™œìš© ì‹œ

| í•­ëª© | ê¸°ì¡´ | KSAT Agent ì‚¬ìš© ì‹œ |
|------|---------|--------------------|
| **ì†Œìš” ì‹œê°„** | 1 ~ 2 ê°œì›” | **10 ë¶„** |
| **ë¹„ìš©** | 100~200ë§Œ ì› | **500 ì›** (í‰ê·  ì‚¬ìš©ëŸ‰ ê¸°ì¤€) |
| **ì˜ì‚¬ì†Œí†µ** | ì„œë©´ í”¼ë“œë°± ë°˜ë³µ | ê¸°ì¶œ ë¶„ì„ê³¼ ìµœì‹  ê²½í–¥ì„ í•™ìŠµí•œ AIì™€ **ì‹¤ì‹œê°„ ëŒ€í™”** |

---

### 3ï¸âƒ£ ì—ì´ì „íŠ¸ êµ¬ì¡°

#### í•µì‹¬ ì•„ì´ë””ì–´

1. **ì—­í•  ë¶„ë‹´** â€“ 'ì£¼ì œì„ ì •Â·íƒìƒ‰Â·ì„¤ê³„Â·ì§‘í•„Â·ì¶œì œÂ·ê²€ì¦Â·ì´ê´„' ê° ë‹¨ê³„ë¥¼ ì „ë¬¸í™”ëœ AIê°€ ì „ë‹´í•©ë‹ˆë‹¤.
2. **ìˆœí™˜ ê²€í† ** â€“ ê²€ì¦ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•˜ë©´ ì´ì „ ë‹¨ê³„ë¡œ í”¼ë“œë°±í•˜ì—¬ ì „ì²´ ì¼ì •ì„ ë‹¨ì¶•í•©ë‹ˆë‹¤.
3. **ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤** â€“ ì‚¬ìš©ìëŠ” ì±„íŒ… í•œ ì¤„ë¡œ ì£¼ì œë¥¼ ì…ë ¥í•˜ê³ , ì§„í–‰ ìƒí™©ê³¼ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.


#### ì—ì´ì „íŠ¸ ì—­í•  ìš”ì•½

| ë‹¨ê³„ | ì—ì´ì „íŠ¸ | ì‚¬ìš© ëª¨ë¸ | ì£¼ìš” ì—…ë¬´ |
|------|----------|----------|-----------|
| **ì‚¬ìš©ì ì…ë ¥** | ì‚¬ìš©ì | - | ì´ˆê¸° ì£¼ì œ ë° ìš”êµ¬ì‚¬í•­ ì „ë‹¬ |
| **ì£¼ì œ êµ¬ì²´í™”** | Subject Collector | GPT-4.1 | ì‚¬ìš©ì ì˜ë„ íŒŒì•… ë° ìƒì„¸ ì£¼ì œ/ì„œìˆ  êµ¬ì¡° í™•ì • |
| **ì´ê´„ ì¡°ì •** | Supervisor | GPT-4.1 | ì „ì²´ ì ˆì°¨ ì§€íœ˜ ë° ì—ì´ì „íŠ¸ ê°„ ì‘ì—… ì¡°ìœ¨ |
| **ì—°êµ¬ ë¶„ì„** | Researcher | Gemini-2.5 Flash | ê¸°ì¶œ ì§€ë¬¸ ê²€ìƒ‰/ë¶„ì„, ê´€ë ¨ ìë£Œ ìˆ˜ì§‘ ë° ìš”ì•½ |
| **êµ¬ì¡° ì„¤ê³„** | Architecture | Claude-3.7 | ê°œë… ì§€ë„ ì´ˆì•ˆ ì‘ì„±, ë¬¸ë‹¨ ë°°ì¹˜ ë° ë…¼ë¦¬ íë¦„ ì„¤ê³„ |
| **ì§€ë¬¸ ì§‘í•„** | Passage Editor | GPT-4.1 (íŒŒì¸íŠœë‹) | ì„¤ê³„ì•ˆ ê¸°ë°˜ ì§€ë¬¸ ì§‘í•„, ê°œë… ì§€ë„ êµ¬í˜„ |
| **ë¬¸í•­ ì¶œì œ** | Question Editor | Gemini-2.5 Flash | 5ì§€ì„ ë‹¤ ë¬¸í•­ ì‘ì„± ë° ì„ ì§€ ë³€ë³„ë ¥ í™•ë³´ |
| **ê²€ì¦** | Validator | Gemini-2.5 Flash | ì§€ë¬¸/ë¬¸í•­ì˜ ì¼ê´€ì„±, ë…¼ë¦¬ ì˜¤ë¥˜, ë‚œì´ë„ ë“± ì¢…í•© ê²€í†  ë° í”¼ë“œë°± |
| **ìµœì¢… ê²°ê³¼ë¬¼** | ì‹œìŠ¤í…œ | - | ì™„ì„±ëœ ì§€ë¬¸, ë¬¸í•­, í•´ì„¤ ì„¸íŠ¸ |

*Validatorê°€ "í†µê³¼" íŒì •ì„ ë‚´ë¦¬ë©´ ì‘ì—…ì´ ì¢…ë£Œë©ë‹ˆë‹¤. Validatorì˜ í”¼ë“œë°±ì— ë”°ë¼ SupervisorëŠ” ì´ì „ ë‹¨ê³„ì˜ ì—ì´ì „íŠ¸ì—ê²Œ ì¬ì‘ì—…ì„ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


#### ì‘ì—… íë¦„

```mermaid
flowchart TD
    %% Supervisor ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš° (ë‹¨ë°©í–¥ íë¦„)
    
    S["Supervisor"]:::super
    
    H(["Human Input"]):::user
    R["Researching"]:::research
    W["Writing"]:::edit
    V["Validating"]:::valid
    F(["Finish"]):::result
    
    H --> S
    S --> R
    R --> W
    W --> V
    V --> F
    
    %% Supervisor ì—°ê²°
    S <-.-> R
    S <-.-> W
    S <-.-> V
    S <-.-> F
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef user fill:#cce5ff,stroke:#0066cc,stroke-width:1px
    classDef super fill:#ffe6cc,stroke:#ff9933,stroke-width:2px,color:#ff6600,font-weight:bold
    classDef research fill:#e6ffcc,stroke:#66cc33,stroke-width:1px
    classDef edit fill:#f9ddff,stroke:#cc66ff,stroke-width:1px
    classDef valid fill:#e6e6ff,stroke:#6666ff,stroke-width:1px
    classDef result fill:#f2f2f2,stroke:#666666,stroke-width:1px
```

---

### 4ï¸âƒ£ ì„¸ë¶€ ê¸°ìˆ  êµ¬í˜„

#### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
KSAT Agent/
â”œâ”€â”€ frontend/               # Streamlit ê¸°ë°˜ ì›¹ ì¸í„°í˜ì´ìŠ¤ (Git ê´€ë¦¬, Streamlit Cloud ë°°í¬)
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ about.py        # í”„ë¡œì íŠ¸ ì†Œê°œ í˜ì´ì§€
â”‚   â”œâ”€â”€ app_main.py         # ë©”ì¸ ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ requirements.txt    # Frontend ì˜ì¡´ì„± (Streamlit Cloudìš©)
â”‚   â””â”€â”€ .streamlit/         # Streamlit ì„¤ì • (í•„ìš”ì‹œ)
â”‚
â”œâ”€â”€ backend/                # ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ì½”ì–´ (Git ê´€ë¦¬)
â”‚   â”œâ”€â”€ DB/                 # ë°ì´í„°ë² ì´ìŠ¤ (ChromaDB, SQLite)
â”‚   â”œâ”€â”€ agent_server.py     # FastAPI ì„œë²„ ì§„ì…ì 
â”‚   â”œâ”€â”€ graph_factory.py    # LangGraph ì›Œí¬í”Œë¡œìš°
â”‚   â”œâ”€â”€ agents_prompt/      # ì—ì´ì „íŠ¸ë³„ í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ tools.py            # ì—ì´ì „íŠ¸ ê³µìš© ë„êµ¬
â”‚   â”œâ”€â”€ handoff_tools.py    # ì—ì´ì „íŠ¸ í•¸ë“œì˜¤í”„ ë„êµ¬
â”‚   â”œâ”€â”€ model_config.py     # LLM ëª¨ë¸ ì„¤ì •
â”‚   â”œâ”€â”€ Dockerfile          # Backend Docker ì´ë¯¸ì§€ ë¹Œë“œìš©
â”‚   â”œâ”€â”€ docker-compose.yaml # Docker Compose ì„¤ì •
â”‚   â”œâ”€â”€ supervisord.conf    # Supervisor ì„¤ì •
â”‚   â””â”€â”€ requirements.txt    # Backend ì˜ì¡´ì„±
â”‚  
â””â”€â”€ Parser/                 # (ì°¸ê³ : ê¸°ì¶œ ë¬¸ì œ ë¶„ì„ ë° ë°ì´í„° ì „ì²˜ë¦¬ ë¡œì§ - Git ê´€ë¦¬ ë²”ìœ„ ì™¸)

```

#### ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­ | ê¸°ìˆ  | ìš©ë„ |
|------|------|------|
| **í”„ë¡ íŠ¸ì—”ë“œ** | Streamlit | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© í‘œì‹œ |
| **ë°±ì—”ë“œ** | FastAPI | API ì„œë²„ ë° ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì²˜ë¦¬ |
| **ë©€í‹°ì—ì´ì „íŠ¸** | LangGraph | ì—ì´ì „íŠ¸ ê°„ ìƒíƒœ ê´€ë¦¬ ë° ì›Œí¬í”Œë¡œìš° |
| | LangChain | ë©”ëª¨ë¦¬, ì²´ì¸, ë„êµ¬ í™œìš© |
| **ë°ì´í„°ë² ì´ìŠ¤** | ChromaDB | ì˜ë¯¸ ê²€ìƒ‰ ë° ë²¡í„° ì €ì¥ì†Œ |
| | SQLite | ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬ ë° ì²´í¬í¬ì¸íŠ¸ |
| **LLM** | OpenAI GPT-4.1 | Supervisor ì—ì´ì „íŠ¸ |
| | Anthropic Claude-3.7 | Passage Editor ì—ì´ì „íŠ¸ |
| | Gemini-2.5 Flash | Researcher, Question Editor, Validator, Subject Collector ì—ì´ì „íŠ¸ |
| **ì„ë² ë”©** | OpenAI text-embedding-3 | í•œêµ­ì–´ í…ìŠ¤íŠ¸ ë²¡í„°í™” |
| **ë°°í¬** | Docker, GCP (Google Cloud Platform) | Backend ì„œë²„ ì»¨í…Œì´ë„ˆí™” ë° í´ë¼ìš°ë“œ VM ë°°í¬ |
| | Streamlit Cloud | Frontend ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ |
| **CI/CD** | GitHub Actions | ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ë¹Œë“œ ë° ë°°í¬ |

#### LangGraph ì„ íƒ ë°°ê²½

ìˆ˜ëŠ¥ ì§€ë¬¸ ìƒì„±ì€ ì—¬ëŸ¬ ë‹¨ê³„ì˜ ë³µì¡í•œ ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ë‹¨ì¼ LLMì„ ì‚¬ìš©í•œ ì ‘ê·¼ë²•ë„ ê³ ë ¤í–ˆìœ¼ë‚˜, ë‹¤ìŒê³¼ ê°™ì€ í•œê³„ì— ì§ë©´í–ˆìŠµë‹ˆë‹¤:
```
1. í† í° ì œí•œì— ë¹ ë¥´ê²Œ ë„ë‹¬ - ìˆ˜ëŠ¥ ì§€ë¬¸ ìƒì„±ì— í•„ìš”í•œ ëª¨ë“  ì§€ì‹œì™€ ì»¨í…ìŠ¤íŠ¸ê°€ 16K í† í°ì„ ì‰½ê²Œ ì´ˆê³¼
2. ì—­í•  í˜¼ë€ - í•˜ë‚˜ì˜ ëª¨ë¸ì´ ì—°êµ¬ì, ì‘ê°€, ê²€í† ì ì—­í• ì„ ë²ˆê°ˆì•„ ìˆ˜í–‰í•˜ë©° ì¼ê´€ì„± ìƒì‹¤
3. ì „ë¬¸ì„± ê²°ì—¬ - ì „ì²´ íƒœìŠ¤í¬ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•˜ë ¤ë‹¤ ë³´ë‹ˆ ê° ë‹¨ê³„ë³„ í’ˆì§ˆì´ ì €í•˜
```
LangGraphëŠ” ì´ëŸ¬í•œ ë¬¸ì œë“¤ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ” ìµœì ì˜ í”„ë ˆì„ì›Œí¬ì˜€ìŠµë‹ˆë‹¤:

> **State ê´€ë¦¬ì˜ íš¨ìœ¨ì„±** : LangChainì˜ ë‹¨ìˆœ ì²´ì¸ê³¼ ë‹¬ë¦¬, LangGraphëŠ” ë³µì¡í•œ ìƒíƒœë¥¼ ê·¸ë˜í”„ ë…¸ë“œ ê°„ì— ìœ ì§€í•˜ê³  ì „ë‹¬í•  ìˆ˜ ìˆì–´ ì—¬ëŸ¬ ì—ì´ì „íŠ¸ê°€ í˜‘ì—…í•˜ê¸°ì— ì´ìƒì ì…ë‹ˆë‹¤.
>
> **ìœ ì—°í•œ ì›Œí¬í”Œë¡œìš°** : ì¡°ê±´ë¶€ ê²½ë¡œì™€ ìˆœí™˜ ê°€ëŠ¥í•œ ê·¸ë˜í”„ êµ¬ì¡°ë¥¼ í†µí•´ "ê²€ì¦ ì‹¤íŒ¨ â†’ ì¬ì‘ì—…" ê°™ì€ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> **ì²´í¬í¬ì¸íŒ…** : ë‚´ì¥ëœ ì²´í¬í¬ì¸íŠ¸ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬, ì¥ì‹œê°„ ì‹¤í–‰ ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ë‚˜ ì¤‘ë‹¨ìœ¼ë¡œë¶€í„° ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì‘ì—…ì„ ì´ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” AsyncSqliteSaverë¥¼ ì‚¬ìš©)

```python
# graph_factory.py ì¤‘ ì¼ë¶€
builder = StateGraph(MultiAgentState)

builder.add_node("subject_collector", subject_collector_agent) # ì£¼ì œ êµ¬ì²´í™”
builder.add_node("researcher", researcher_agent)
builder.add_node("architecture", architecture_agent)
# ... (ë‹¤ë¥¸ ì—ì´ì „íŠ¸ ë…¸ë“œ ì¶”ê°€) ...
builder.add_node("validator", validator_agent)

builder.add_conditional_edges( # ê²€ì¦ ê²°ê³¼ì— ë”°ë¥¸ ë¶„ê¸°
    "validator",
    lambda state: "architecture" if state.get("validation_result") == "rewrite_architecture" else
                 "passage_editor" if state.get("validation_result") == "rewrite_passage" else
                 "question_editor" if state.get("validation_result") == "rewrite_question" else
                 "END", # ìµœì¢… í†µê³¼
    {"architecture": "architecture", "passage_editor": "passage_editor", "question_editor": "question_editor", "END": END}
)
graph = builder.compile(checkpointer=saver) # AsyncSqliteSaver ì¸ìŠ¤í„´ìŠ¤ ì£¼ì…
```

#### LLM ëª¨ë¸ ì„ íƒ

ê° íƒœìŠ¤í¬ì˜ íŠ¹ì„±ì— ë§ê²Œ ìµœì í™”ëœ LLM ëª¨ë¸ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼, ClaudeëŠ” ë¬¸ì²´ì™€ ê¹Šì´ ìˆëŠ” ë‚´ìš© ìƒì„±ì— ê°•ì ì„ ë³´ì˜€ê³ , GeminiëŠ” ë¶„ì„ê³¼ ë¬¸í•­ ìƒì„±ì˜ ì†ë„ì—ì„œ ìš°ìœ„ë¥¼ ë³´ì˜€ìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ëª¨ë¸ ì¡°í•©ì„ í†µí•´ í’ˆì§ˆê³¼ ë¹„ìš© íš¨ìœ¨ì„± ëª¨ë‘ë¥¼ í™•ë³´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

| ì—ì´ì „íŠ¸ | ì‚¬ìš© ëª¨ë¸ | ì„ íƒ ì´ìœ  |
|---------|---------|----------|
| **Supervisor** | ```GPT-4.1``` | â€¢ ì§€ì‹œì‚¬í•­ì„ ì •í™•íˆ ì´í•´í•˜ê³  ë”°ë¥´ëŠ” ëŠ¥ë ¥(instruction following)ì´ íƒì›”í•¨<br>â€¢ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì–´ì¡°ë¡œ ì†Œí†µí•˜ë©° ì‘ì—… íë¦„ì„ ì¡°ìœ¨<br>â€¢ ë³µì¡í•œ ì‘ì—… íë¦„ì„ ê´€ë¦¬í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨ |
| **Passage Editor** | ```Claude-3.7``` (íŒŒì¸íŠœë‹ ì ìš©) | â€¢ í•œêµ­ì–´ ë¬¸ì²´ê°€ ìì—°ìŠ¤ëŸ½ê³  ìˆ˜ëŠ¥ ì§€ë¬¸ ìŠ¤íƒ€ì¼ì˜ ê³ í’ˆì§ˆ í…ìŠ¤íŠ¸ ìƒì„±<br>â€¢ ë³µì¡í•œ ê°œë…ë„ ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©° 1,700ì ë‚´ì™¸ë¡œ ì••ì¶•í•˜ëŠ” ëŠ¥ë ¥ íƒì›”<br>â€¢ ë‚´ì  ì¼ê´€ì„±ì´ ë†’ì€ ì§€ë¬¸ ì‘ì„± ê°€ëŠ¥ |
| **Subject Collector, Researcher, Question Editor & Validator** | ```Gemini-2.5 Flash``` | â€¢ ë¹ ë¥¸ ì‘ë‹µ ì†ë„ë¡œ ì‚¬ìš©ì ì˜ë„ íŒŒì•…, ì§€ë¬¸ ë¶„ì„ ë° ë¬¸í•­ ìƒì„±<br>â€¢ ìˆ˜í•™ì /ë…¼ë¦¬ì  ê´€ê³„ íŒŒì•…ì— ê°•ì , ì„ ì§€ ê°„ ë³€ë³„ë ¥ ì²´í¬ì— íš¨ê³¼ì <br>â€¢ ë¹„ìš© íš¨ìœ¨ì ì´ë¼ ë°˜ë³µì  ê²€ì¦ ë° ë‹¤ì–‘í•œ íƒìƒ‰ ê³¼ì •ì— ì í•© |

```python
# ì˜ˆì‹œ: Passage Editor ì—ì´ì „íŠ¸ ìƒì„± (íŒŒì¸íŠœë‹ ëª¨ë¸ ì‚¬ìš©)
passage_editor_agent = create_react_agent(
    model="ft:gpt-4.1-ksat-agent-passage-editor-v2", # íŒŒì¸íŠœë‹ëœ ëª¨ë¸ ID
    tools=passage_editor_tools,
    prompt=passage_prompt
)
```

#### ì—ì´ì „íŠ¸ ê°„ ì‘ì—… í†µì œê¶Œ ì „í™˜ ë©”ì»¤ë‹ˆì¦˜

ì´ˆê¸° ë²„ì „ì—ì„œëŠ” ì—ì´ì „íŠ¸ ê°„ ì „í™˜ì„ ìœ„í•´ LangGraphì˜ ì¡°ê±´ë¶€ ì—£ì§€ë¥¼ ì´ìš©í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë¥¼ ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤:

```
1. í™•ì¥ì„± í•œê³„ - ìƒˆ ì—ì´ì „íŠ¸ ì¶”ê°€ ì‹œ, ë¶„ê¸° ë¡œì§ê³¼ ì½”ë“œë¥¼ ì¼ì¼ì´ ìˆ˜ì •í•´ì•¼ í•¨
2. ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ - ëˆ„ê°€ ë‹¤ìŒì— ì‹¤í–‰ë ì§€ ì¶”ì í•˜ëŠ” ë¡œì§ì´ ë³µì¡í•´ì§
3. ìœ ì—°ì„± ë¶€ì¡± - ì‹¤í–‰ ì¤‘ ì›Œí¬í”Œë¡œìš° ë³€ê²½ì´ ì–´ë ¤ì›€
```

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Supervisor ì—ì´ì „íŠ¸ê°€ ë‹¤ìŒ ì‘ì—…ìë¥¼ ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œí•˜ê³ , í˜¸ì¶œëœ ì—ì´ì „íŠ¸ëŠ” ìì‹ ì˜ ì—­í• ì„ ìˆ˜í–‰ í›„ Supervisorì—ê²Œ ë‹¤ì‹œ ì œì–´ê¶Œì„ ë„˜ê¸°ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤. `handoff_to_supervisor` ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ê³¼ì •ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```python
# handoff_tools.py ì¼ë¶€
@tool
async def handoff_to_supervisor(
    # ... (ë§¤ê°œë³€ìˆ˜ ìƒëµ)
):
    """ì‘ì—… ì™„ë£Œ í›„ Supervisorì—ê²Œ í†µì œê¶Œì„ ë„˜ê¹ë‹ˆë‹¤."""
    # ... (ë©”ì‹œì§€ ìƒì„± ë° ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§)
    return Command(goto="supervisor", ...) # Supervisor ë…¸ë“œë¡œ ì´ë™
```

ì´ ì ‘ê·¼ë²•ì˜ ì¥ì ì€ Supervisorì˜ í”„ë¡¬í”„íŠ¸ì™€ íŒë‹¨ ë¡œì§ì„ í†µí•´ ì›Œí¬í”Œë¡œìš°ë¥¼ ìœ ì—°í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

#### ChromaDB ì„ íƒ ì´ìœ ì™€ ì„ë² ë”© ì „ëµ

LLMì´ ê¸°ì¶œ ë¬¸ì œë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ ì˜µì…˜ì„ ê²€í† í–ˆìŠµë‹ˆë‹¤:

> ê²€í† í•œ ë²¡í„° DB í›„ë³´:
> - Pinecone: ê´€ë¦¬í˜• ì„œë¹„ìŠ¤, í™•ì¥ì„± ìš°ìˆ˜
> - Milvus: ê³ ì„±ëŠ¥ ë¶„ì‚° ì²˜ë¦¬ ê°€ëŠ¥
> - ChromaDB: ê²½ëŸ‰í™”, ë¡œì»¬ ì‹¤í–‰ ê°€ëŠ¥, Python í†µí•© ìš°ìˆ˜


ìµœì¢…ì ìœ¼ë¡œ ChromaDBë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ë¡œì»¬ í´ë¼ì´ì–¸íŠ¸**: ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œë„ SQLite ë°±ì—”ë“œë¡œ ì™„ì „íˆ ì‘ë™í•˜ì—¬ ì™¸ë¶€ ì˜ì¡´ì„± ìµœì†Œí™”. VM í™˜ê²½ì—ì„œ ë³„ë„ì˜ DB ì„œë²„ ì—†ì´ íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ìš´ì˜ ê°€ëŠ¥.
2. **ë©”íƒ€ë°ì´í„° í•„í„°ë§**: ì—°ë„, ì›”, ì˜ì—­ ë“±ì˜ ë³µí•© í•„í„°ë§ì„ `where` ì ˆë¡œ ê°„ë‹¨íˆ êµ¬í˜„ ê°€ëŠ¥.
3. **ì„ë² ë”© ìœ ì—°ì„±**: ë‹¤ì–‘í•œ ì„ë² ë”© ëª¨ë¸ì„ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆëŠ” ì•„í‚¤í…ì²˜ ì§€ì›.

í•œêµ­ì–´ í…ìŠ¤íŠ¸ ì„ë² ë”©ì„ ìœ„í•´ ì—¬ëŸ¬ ëª¨ë¸ì„ ë²¤ì¹˜ë§ˆí¬í•œ ê²°ê³¼, OpenAIì˜ `text-embedding-3-large`ê°€ í•œê¸€ ìˆ˜ëŠ¥ ì§€ë¬¸ì˜ ì˜ë¯¸ì  ìœ ì‚¬ì„±ì„ ê°€ì¥ ì •í™•íˆ í¬ì°©í•˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸ë˜ì–´ ì±„íƒí–ˆìŠµë‹ˆë‹¤.

```python
# tools.pyì˜ ChromaDB ê²€ìƒ‰ í•¨ìˆ˜ ì˜ˆì‹œ
results = collection.query(
    query_texts=[query],
    n_results=n_results,
    where={"year": year, "field": field} # ë©”íƒ€ë°ì´í„° í•„í„°ë§
)
```

#### í† í° ë¹„ìš© ê´€ë¦¬

AI ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œê³¼ ë¹„ìš© ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìš”ì•½ ëª¨ë¸ ì ‘ê·¼ë²• ëŒ€ì‹  ë…ì°½ì ì¸ "ì ˆì‚­+ì£¼ì…" ì „ëµì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤:

```python
# message_reducer.pyì˜ ë©”ì‹œì§€ ì ˆì‚­ ë¡œì§ (ê°œë…)
# ì‹¤ì œ êµ¬í˜„ì€ state['messages']ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ê±°ë‚˜, í›…(hook)ì„ í†µí•´ ì²˜ë¦¬
def truncate_messages_for_llm(messages: list, max_tokens: int) -> list:
    """ê¸´ ë©”ì‹œì§€ ëª©ë¡ì„ LLM ì…ë ¥ í¬ê¸°ì— ë§ê²Œ ì ˆì‚­í•©ë‹ˆë‹¤."""
    # ... (í† í° ìˆ˜ ê³„ì‚° ë° ì ˆì‚­ ë¡œì§)
    # ì˜ˆ: ìµœê·¼ ë©”ì‹œì§€ ìœ„ì£¼ ë³´ì¡´, ì‹œìŠ¤í…œ ë©”ì‹œì§€ ë³´ì¡´, ì¤‘ê°„ ë©”ì‹œì§€ ìš”ì•½ ë˜ëŠ” ìƒëµ
    # í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì•/ë’¤ ì¼ë¶€ë§Œ ë‚¨ê¸°ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•¨
    # if num_tokens(content) > TRUNCATE_THRESHOLD:
    #     truncated = content[:500] + "\n...[ì¤‘ëµ]...\n" + content[-500:]
    return processed_messages
```

ì´ ì ‘ê·¼ë²•ì„ í†µí•´ ì–»ì€ ì´ì :

1. **ìš”ì•½ ëª¨ë¸ ë¹„ìš© ì ˆê°**: ì¶”ê°€ LLM í˜¸ì¶œ ì—†ì´ ë‹¨ìˆœ ì ˆì‚­ìœ¼ë¡œ í† í° ì ˆì•½.
2. **ì¤‘ìš” ì •ë³´ ë³´ì¡´**: ì¼ë°˜ì ìœ¼ë¡œ ë©”ì‹œì§€ì˜ ì•ë¶€ë¶„(ì§€ì‹œì‚¬í•­)ê³¼ ë’·ë¶€ë¶„(ìµœê·¼ ëŒ€í™”)ì— ì¤‘ìš” ì •ë³´ê°€ ì§‘ì¤‘ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì´ ë¶€ë¶„ì„ ìœ ì§€.
3. **ì²˜ë¦¬ ì§€ì—° ìµœì†Œí™”**: ìš”ì•½ ëª¨ë¸ í˜¸ì¶œ ëŒ€ë¹„ ì‹œê°„ ì ˆì•½.

ì‹¤ì œ í…ŒìŠ¤íŠ¸ì—ì„œ í’ˆì§ˆ ì €í•˜ ì—†ì´ í† í° ì‚¬ìš©ëŸ‰ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

### 5ï¸âƒ£ ê°œë… ì§€ë„

>ê°œë… ì§€ë„ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ ë¶€ë¡ì„ ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.

#### ê°œë… ì§€ë„ ì†Œê°œ

êµìœ¡ ì½˜í…ì¸  í‰ê°€ì—ì„œ "ë…¼ë¦¬ êµ¬ì¡°ê°€ ë³µì¡í•˜ë‹¤"ë‚˜ "ì •ë³´ ë°€ë„ê°€ ë†’ë‹¤"ì™€ ê°™ì€ í‘œí˜„ì€ ì£¼ê´€ì ì´ê³  ì •ì„±ì ì¸ í‰ê°€ì— ë¶ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë‚œì´ë„ì™€ ì •ë³´ ë°€ë„ì˜ ì¡°ì ˆì´ ì¶œì œìì˜ ê²½í—˜ê³¼ ì§ê´€ì— ì˜ì¡´í•´ì•¼ í–ˆê³ , AIë¥¼ í™œìš©í•œ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•ì´ ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

KSAT AgentëŠ” ìì²´ ê°œë°œí•œ **ê°œë… ì§€ë„**ë¥¼ í†µí•´ ì´ëŸ¬í•œ ì •ì„±ì  í‰ê°€ë¥¼ ì •ëŸ‰í™”í–ˆìŠµë‹ˆë‹¤:

| ê¸°ëŠ¥ | ê¸°ì¡´ ë°©ì‹ | ê°œë… ì§€ë„ì˜ íš¨ê³¼ |
|------|-----------|--------------------------------|
| ë…¼ë¦¬ êµ¬ì¡° íŒŒì•… | ì „ë¬¸ê°€ì˜ ì£¼ê´€ì  í‰ê°€ | **ì—£ì§€ íƒ€ì…Â·ê¹Šì´**ë¥¼ ê³„ëŸ‰í™” |
| ì •ë³´ ë°€ë„ íŒë‹¨ | ë‹¨ìˆœ ê¸€ììˆ˜Â·ë¬¸ë‹¨ìˆ˜ | **ë…¸ë“œ ìˆ˜ / 1ì²œ token** ì§€í‘œ |
| ì„ ì§€ ìƒì„± ê·¼ê±° | ìˆ˜ì‘ì—… ê²€ìƒ‰ | ê·¸ë˜í”„ ê²½ë¡œ íƒìƒ‰ |

##### â‘  ì˜ˆì‹œ ì§€ë¬¸

> "ì´‰ë§¤ëŠ” í™”í•™ ë°˜ì‘ì˜ í™œì„±í™” ì—ë„ˆì§€ë¥¼ ë‚®ì¶° ë°˜ì‘ ì†ë„ë¥¼ ë†’ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´‰ë§¤ ìì²´ëŠ” ë°˜ì‘ ì „í›„ì— ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."

##### â‘¡ ìë™ ì¶”ì¶œëœ ê·¸ë˜í”„

| ë…¸ë“œ ID | ë¼ë²¨ | ì„¤ëª… |
|---------|------|------|
| N1 | Catalyst | ì´‰ë§¤ |
| N2 | ActivationEnergy | í™œì„±í™” ì—ë„ˆì§€ |
| N3 | ReactionRate | ë°˜ì‘ ì†ë„ |

| ì—£ì§€ | íƒ€ì…Â·ë ˆì´ë¸” | ì˜ë¯¸ |
|------|-------------|------|
| N1â†’N2 | Causality Â· `influences` | ì´‰ë§¤ê°€ ì—ë„ˆì§€ë¥¼ ë‚®ì¶¤ |
| N2â†’N3 | Causality Â· `causes` | ë‚®ì•„ì§„ ì—ë„ˆì§€ê°€ ì†ë„ ì¦ê°€ ì´ˆë˜ |
| N1â†’N1 | QuantComparison Â· `is_equal_to` | ì´‰ë§¤ ì „í›„ ë™ì¼(ìê¸° ë³´ì¡´) |

ì´ëŸ¬í•œ ì •ëŸ‰ì  ì§€í‘œë¥¼ í†µí•´ Question EditorëŠ” "ì›ì¸â†’ê²°ê³¼â†’ë¶ˆë³€" ê²½ë¡œë¥¼ ì„ ì§€ íŒ¨í„´ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì²˜ëŸ¼ ê°œë… ì§€ë„ëŠ” ë…¼ë¦¬ êµ¬ì¡°, ì •ë³´ ë°€ë„, ì¶”ë¡  ê²½ë¡œë¥¼ ê°ê´€ì  ìˆ˜ì¹˜ë¡œ ë³€í™˜í•˜ì—¬, ê°œë… ì§€ë„ì˜ ì ìš©ì„ í†µí•´ ì—ì´ì „íŠ¸ì—ê²Œ ì§€ë¬¸ì˜ ë‚œì´ë„ì™€ ì •ë³´ ë°€ë„ë¥¼ ì •ëŸ‰ì ìœ¼ë¡œ ì£¼ë¬¸í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

![ê°œë… ì§€ë„ ì˜ˆì‹œ](frontend/pages/image.png) 

---

### 6ï¸âƒ£ ì§€ë¬¸ ì‘ì„±ìš© LLM íŒŒì¸íŠœë‹

**Problem** 
> "ë³¸ì§ˆì ìœ¼ë¡œ 'ì‰½ê³  ì§ê´€ì ìœ¼ë¡œ' ì„¤ëª…í•˜ë„ë¡ í•™ìŠµëœ LLM ëª¨ë¸ì˜ íŠ¹ì„± ìƒ,
> í”„ë¡¬í”„íŠ¸ë§Œìœ¼ë¡œ ì •ë³´ì˜ ë°€ë„ì™€ ë…í•´ ë‚œì´ë„ë¥¼ ê·¹ì ìœ¼ë¡œ í–¥ìƒì‹œí‚¤ê¸°ì—ëŠ” í•œê³„ê°€ ìˆë‹¤ê³  ëŠê¼ˆë‹¤."

ë”°ë¼ì„œ ë‹¤ìŒì˜ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ì—¬ ì†Œê·œëª¨ íŒŒì¸íŠœë‹ì„ ì§„í–‰í•œ ê²°ê³¼, ì§€ë¬¸ í€„ë¦¬í‹°ë¥¼ ê·¹ì ìœ¼ë¡œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì—ˆë‹¤. (ì´ ê³¼ì •ì€ `Parser/` ë° ë³„ë„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì§„í–‰)

| êµ¬ë¶„ | ë‚´ìš© |
|------|------|
| í•™ìŠµ ë°ì´í„° 1 | LLMì„ í™œìš©í•´ **ê¸°ì¶œ ì§€ë¬¸**ì—ì„œ ì¶”ì¶œí•œ ê°œë… ì§€ë„ |
| í•™ìŠµ ë°ì´í„° 2 | ê¸°ì¶œ ì§€ë¬¸ ì›ë¬¸ |

#### â‘  SFT ë°ì´í„°ì…‹ ìƒì„± íŒŒì´í”„ë¼ì¸

| ë‹¨ê³„               | ìŠ¤í¬ë¦½íŠ¸ (`Parser/` ë° ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸)        | í•µì‹¬ ë¡œì§Â·í•¨ìˆ˜                                                   | ì‚°ì¶œë¬¼                                     |
| ---------------- | --------------------------------- | ---------------------------------------------------------- | --------------------------------------- |
| **1. ê¸°ì¶œ txt íŒŒì‹±** | `concept_map_converter.py` (ê°€ì¹­)   | `passage_parser()` ã€ˆì¤„ë°”ê¿ˆÂ·íŠ¹ìˆ˜ ê¸°í˜¸ ì •ë¦¬ã€‰                          | `passage` (*str*)                       |
| **2. ê°œë… ì§€ë„ ë³€í™˜**  | `convert_concept_map_async()` (ê°€ì¹­) | Gemini-2.5-flash -> JSON (15 Â± 5 ë…¸ë“œ)                       | `concept_map.json`                      |
| **3. JSONL ë¹Œë“œ**  | `training_data_generator_async()` (ê°€ì¹­) | 3-turn ë©”ì‹œì§€ ìƒ˜í”Œ<br>`systemâ†’user(concept)â†’assistant(passage)` | `â€¦training_dataset.jsonl`               |
| **4. ê²€ì¦Â·Split**  | `data_validation_cli.py` (ê°€ì¹­)     | í† í°Â·í¬ë§· ê²€ì‚¬ â†’ 90 / 10 split                                   | `train.jsonl` (76) <br>`val.jsonl` (10) |

> *ë°ì´í„° í†µê³„* : ì „ì²´ â‰ˆ 12 ë§Œ tokens, 1 ìƒ˜í”Œ í‰ê·  1 500 tokens

---

#### â‘¡ Fine-Tune ì„¤ì • (OpenAI)


| íŒŒë¼ë¯¸í„°       | ê°’                                           | ë¹„ê³              |
| ---------- | ------------------------------------------- | -------------- |
| Base model | `gpt-4.1-2025-04-14`                        | 2025-Q2 ê³µê°œ     |
| Epochs     | 3 (*auto*)                                  | ë°ì´í„° ì†ŒëŸ‰, ê³¼ì í•© ë°©ì§€ |
| Batch / LR | auto / default                              |                |
| Run ID     | `ft:gpt-4.1-â€¦:ksat-agent-passage-editor-v2` |                |

**ê²°ê³¼ ì§€í‘œ**

| Metric          | ê°’         |
| --------------- | --------- |
| Train loss      | **0.274** |
| Valid loss      | **0.255** |
| Full valid loss | 0.302     |

(loss gap â‰ˆ 0.02 â†’ ì•ˆì • ìˆ˜ë ´)

---

#### â‘¢ Inference íŒŒë¼ë¯¸í„° (ì•ˆì • preset)

```python
gen_cfg = {
    "model": "ft:gpt-4.1-ksat-agent-passage-editor-v2",
    "temperature": 0.30,
    "top_p": 0.85,
    "repetition_penalty": 1.2,
    "max_tokens": 1200,
}
```

* `temperature 0.5` : ë…¼ë¦¬ ì¼ê´€ì„±â†‘
* `top_p 0.85`â€ƒâ€ƒâ€ƒ   : ê¸°ë³¸ê°’ì— ë¹„í•´ ë³´ìˆ˜ì ìœ¼ë¡œ ì±…ì •í•˜ì—¬ ë¬¸ì²´ ì¼ê´€ì„±â†‘
* `repetition_penalty 1.2` : ê¼¬ë¦¬ ë°˜ë³µ í˜„ìƒìƒ 90 %â†“

---

#### â‘£ ì •ëŸ‰ì  ê°œì„  ê²°ê³¼

| ì§€í‘œ                 | í”„ë¡¬í”„íŠ¸ Only | Fine-Tune í›„ | ê°œì„ í­    |
| ------------------ | --------- | ----------- | ------ |
| ë‹¨ë½ë³„ "ì •ì˜â†’ì¸ê³¼â†’ë¹„êµ" ì™„ì„±ë¥  | 38 %      | **71 %**    | +33 %p |
| ë§¤ë ¥ì  ì˜¤ë‹µ(ê°’Â·ì¡°ê±´ êµë€) ë¹„ìœ¨ | 42 %      | **88 %**    | +46 %p |
| ì¤‘ë³µÂ·ë¶ˆí•„ìš” ë¬¸ì¥ ë¹„ì¤‘       | 12 %      | **3 %**     | -9 %p  |
| ìˆ˜ëŠ¥ ì „ë¬¸ê°€ ì´ì (5ì  ë§Œì )   | 3.0       | **4.5**     | +1.5   |

---

#### â‘¤ ì£¼ìš” ì´ìŠˆ & í•´ê²°ì±…

| ì´ìŠˆ                                 | í•´ê²° ë°©ë²•                                  |
| ---------------------------------- | -------------------------------------- |
| ë™ì¼ ë¬¸ì¥, ë¬¸ë‹¨ ë°˜ë³µ                       | `repetition_penalty=1.2` + Top-k ë…¸ë“œ í•„í„° |
| ì´ìƒí•œ ë¬¸ìì—´ì´ ì¶œë ¥ë˜ëŠ” í˜„ìƒ                      | `temperature=0.6` í•˜í–¥ ì¡°ì • |

---

### 7ï¸âƒ£ ì„œë²„ ì•„í‚¤í…ì²˜

#### 7.1 ë‹¤ì¤‘ ì‚¬ìš©ì ì„¸ì…˜ ê´€ë¦¬

ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œ ê° ì‚¬ìš©ìì˜ ì‘ì—… ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì„¸ ê°€ì§€ í•µì‹¬ ìš”ì†Œë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤:

| ìš”ì†Œ | ì‚¬ìš© ê¸°ìˆ  | ì£¼ìš” ê¸°ëŠ¥ |
|------|-----------|----------|
| **ëŒ€í™” ìƒíƒœ** | `MultiAgentState` (`TypedDict`) | ì—ì´ì „íŠ¸ ê°„ ë©”ì‹œì§€Â·ìš”ì•½Â·ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë‹¨ì¼ ê°ì²´ë¡œ ê³µìœ  |
| **ì„¸ì…˜ DB** | `AsyncSqliteSaver` | Stream lit ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œ ì„¸ì…˜ë³„ ì²´í¬í¬ì¸íŠ¸ ìœ ì§€ |
| **ë§Œë£Œ ì •ë¦¬** | `cleanup_old_sessions()` | 24 ì‹œê°„ í›„ SQLite íŒŒì¼ ìë™ ì‚­ì œë¡œ ë””ìŠ¤í¬ ì‚¬ìš© ìµœì†Œí™” |

ì´ë¥¼ í†µí•´ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì‹œìŠ¤í…œì„ ì‚¬ìš©í•´ë„ ê° ì‘ì—…ì´ ì™„ì „íˆ ë¶„ë¦¬ë˜ì–´ ê´€ë¦¬ë˜ë©°, 

ë§Œì•½ ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë”ë¼ë„ ì„œë²„ DBì— ì €ì¥ëœ ì„¸ì…˜ì„ ë¶ˆëŸ¬ì™€ ë§ˆì§€ë§‰ ì²´í¬í¬ì¸íŠ¸ë¶€í„° ì‘ì—…ì„ ì¬ê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# ê° ì‚¬ìš©ìë³„ ë…ë¦½ëœ ì„¸ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
memory = await aiosqlite.connect(f"sessions/{user_id}_{timestamp}.db")
saver  = AsyncSqliteSaver(memory)
await saver.setup()          # í•„ìš”í•œ í…Œì´ë¸” ìë™ ìƒì„±

# ì¤‘ìš” ì‘ì—… ë‹¨ê³„ë§ˆë‹¤ ìƒíƒœ ìŠ¤ëƒ…ìƒ· ì €ì¥
await saver.flush(state)     # ì²´í¬í¬ì¸íŠ¸ ìƒì„±
```


#### 7.2 ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° êµ¬í˜„

ì‘ì—… ì‹œê°„ì´ 5-10ë¶„ ì •ë„ ì†Œìš”ë˜ëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” ì‚¬ìš©ìì—ê²Œ ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. 

ì´ë¥¼ ìœ„í•´ FastAPIì˜ ìŠ¤íŠ¸ë¦¬ë° ê¸°ëŠ¥ê³¼ LangGraphì˜ `astream` ê¸°ëŠ¥ì„ ê²°í•©í–ˆìŠµë‹ˆë‹¤:

```python
@app.post("/chat/stream")
async def chat_stream_endpoint(request: ChatRequest):
    """ì‹¤ì‹œê°„ìœ¼ë¡œ ì—ì´ì „íŠ¸ ì‘ì—… ê³¼ì •ì„ ìŠ¤íŠ¸ë¦¬ë°í•©ë‹ˆë‹¤"""
    async def event_generator():
        # ê° ì—ì´ì „íŠ¸ì˜ ì‘ì—… ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡
        async for item in stream_agent_response(request):
            # ì¤„ë°”ê¿ˆì„ ì¶”ê°€í•´ í´ë¼ì´ì–¸íŠ¸ê°€ ê° ì´ë²¤íŠ¸ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆê²Œ í•¨
            yield item + "\n"
    
    # ë¸Œë¼ìš°ì €ì— ì§€ì†ì ì¸ ì—°ê²° ìœ ì§€ë¥¼ ìœ„í•œ í—¤ë” ì„¤ì •
    return StreamingResponse(
        event_generator(),
        media_type="application/json",
        headers={
            "Cache-Control": "no-cache",  # ìºì‹± ë°©ì§€
            "Connection": "keep-alive",   # ì—°ê²° ìœ ì§€
        }
    )
```

ì´ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ìëŠ” ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©ì„ í† í° ë‹¨ìœ„ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ SSE(Server-Sent Events) ëŒ€ì‹  ë‹¨ìˆœ JSON ë¼ì¸ í˜•ì‹ì„ ì±„íƒí•˜ì—¬ í† í° ë‹¨ìœ„ ì „ì†¡-íŒŒì‹± ê³¼ì •ì„ ë‹¨ìˆœí™”í–ˆìŠµë‹ˆë‹¤.

#### 7.3 ìš´ì˜ í™˜ê²½

KSAT Agent ë°±ì—”ë“œ ì‹œìŠ¤í…œì€ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ìš´ì˜ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|----------|------|-----------|
| **ì‹¤í–‰ í™˜ê²½** | Docker ì»¨í…Œì´ë„ˆ + GCP ê°€ìƒë¨¸ì‹  | â€¢ ê°œë°œ/ìš´ì˜ í™˜ê²½ ì¼ê´€ì„± ìœ ì§€<br>â€¢ ì¢…ì†ì„± ê²©ë¦¬<br>â€¢ ê°„í¸í•œ ë°°í¬ ë° í™•ì¥ |
| **í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬** | Supervisor | â€¢ ì„œë²„ í”„ë¡œì„¸ìŠ¤ ìë™ ê´€ë¦¬<br>â€¢ ì˜ˆê¸°ì¹˜ ì•Šì€ ì¢…ë£Œ ì‹œ ì¬ì‹œì‘<br>â€¢ ë¡œê·¸ ìˆ˜ì§‘ ë° ëª¨ë‹ˆí„°ë§ |
| **CI/CD ì²´ê³„** | GitHub Actions | â€¢ main ë¸Œëœì¹˜ ë³€ê²½ ê°ì§€<br>â€¢ ìë™ ë¹Œë“œ ë° ë°°í¬<br>â€¢ ì„œë²„ ì½”ë“œ ë™ê¸°í™” |

**ì¸í”„ë¼ êµ¬ì„± íŒŒì¼**

```
backend/
â”œâ”€â”€ Dockerfile            # ë°±ì—”ë“œ ì»¨í…Œì´ë„ˆ ì •ì˜
â”œâ”€â”€ docker-compose.yaml   # ì»¨í…Œì´ë„ˆ êµ¬ì„± ë° ë„¤íŠ¸ì›Œí¬ ì„¤ì •
â”œâ”€â”€ supervisord.conf      # í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ì„¤ì •
â”œâ”€â”€ requirements.txt      # Python ì¢…ì†ì„±
â””â”€â”€ .env                  # í™˜ê²½ ë³€ìˆ˜ (Git ì œì™¸)

frontend/
â””â”€â”€ requirements.txt      # Streamlit ì•± ì¢…ì†ì„±
```

> **ì°¸ê³ ** : API í‚¤ ë“± ë¯¼ê° ì •ë³´ëŠ” `.env` íŒŒì¼ë¡œ ì„œë²„ì—ì„œ ì§ì ‘ ê´€ë¦¬ë˜ë©°, Git ì €ì¥ì†Œì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---
### 8ï¸âƒ£ ë§ºìŒë§

KSAT AgentëŠ” ê¸°ì¡´ ì¶œì œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒë‹¹ ë¶€ë¶„ íš¨ìœ¨í™”í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€í•©ë‹ˆë‹¤. íˆ¬ì… ë¹„ìš©ì„ ë‚®ì¶¤ìœ¼ë¡œì¨, ì–‘ì§ˆì˜ ë¬¸í•­ì´ ì €ë ´í•œ ê°€ê²©ì— ê³µê¸‰ë  ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. 

KSAT Agentê°€ êµì‚¬ì™€ í•™ìƒë“¤ì—ê²Œ ì‹¤ì§ˆì ì¸ ì´ë¡œì›€ì„ ê°€ì ¸ë‹¤ ì£¼ê³ , ë‚˜ì•„ê°€ êµìœ¡ ì½˜í…ì¸  ì œì‘ì˜ íŒ¨ëŸ¬ë‹¤ì„ì„ ë°”ê¾¸ëŠ” ê³„ê¸°ê°€ ë˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. 

ê°ì‚¬í•©ë‹ˆë‹¤.


<br>
<br>

### :bulb: ë¶€ë¡ : ê°œë… ì§€ë„ ìŠ¤í‚¤ë§ˆ v5.0 Docs 

_ìƒìœ„ê¶Œâ€§ê³ ë‚œë„ ìˆ˜ëŠ¥ ë…ì„œ ì¶œì œë¥¼ ìœ„í•œ ì„¤ê³„_

---

#### 1. ê°œìš” & í•„ìš”ì„±  
ê³ ë‚œë„ ë…ì„œ ë¬¸í•­ì€ **ë‹¨ì¼ ì‚¬ì‹¤ í™•ì¸**ì´ ì•„ë‹Œ *ë‹¤ë‹¨ê³„ ì¶”ë¡ Â·ë¹„íŒì  ë¹„êµÂ·ê´€ì  ì¶©ëŒ*ì„ ìš”êµ¬í•œë‹¤.  
ìŠ¤í‚¤ë§ˆ v5.0ì€ ì´ëŸ¬í•œ ë¬¸í•­ì„ **ê·¸ë˜í”„ í•œ âˆ¼ ë‘ í™‰** ì•ˆì—ì„œ ê·¼ê±°ë¥¼ ì°¾ê³ , ì„¸ âˆ¼ ë„¤ í™‰ê¹Œì§€ í™•ì¥í•´ ì¢…í•©ì  íŒë‹¨ì´ ê°€ëŠ¥í•˜ë„ë¡ ë‹¤ìŒì„ ëª©í‘œë¡œ í•œë‹¤.

| ëª©í‘œ | ì„¤ëª… |
|------|------|
| **ì¶”ë¡  ê¹Šì´** | ì¸ê³¼Â·ì¡°ê±´Â·ë°˜ë¡€Â·ë©”íƒ€í‰ê°€ê¹Œì§€ 4-ë ˆë²¨ ì´ìƒ ì—°ì‡„ ê´€ê³„ ì¶”ì  ê°€ëŠ¥ |
| **ê´€ì  ëŒ€ë¦½** | ë™ì¼ ë…¸ë“œì— ëŒ€í•´ *ì£¼ì¥Â·ê·¼ê±°Â·ë°˜ë°•Â·ì–‘ë³´*ë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ í‘œí˜„ |
| **ì§ˆì  ë¹„êµ** | "A â†” B" ë‹¨ìˆœ ë¹„êµë¥¼ ë„˜ì–´ *ìš°ìœ„/ì—´ìœ„Â·ì¤€ê±°ì¶•*ì„ ëª…ì‹œ |
| **ê²€ì¦ ê°€ëŠ¥ì„±** | ì„ ì§€ íŒë³„ ì‹œ *supporting_sentence* 1-2ê°œë©´ ì¶©ë¶„í•˜ë„ë¡ ì„¤ê³„ |
| **ë‹¤ë¶„ì•¼ í˜¸í™˜** | ë²•Â·ì •ì¹˜, ê³¼í•™Â·ê¸°ìˆ , ì² í•™Â·ì˜ˆìˆ  ì§€ë¬¸ ëª¨ë‘ ê³µí†µ ìŠ¤í‚¤ë§ˆ ì‚¬ìš© |

---

#### 2. ì£¼ìš” ë³€ê²½ì  (v4.1 â†’ v5.0)

| êµ¬ë¶„ | v4.1 | v5.0 (ì‹ ê·œÂ·ë³€ê²½) |
|------|------|-----------------|
| **Edge Type ìˆ˜** | 15ì¢… | **20ì¢…** (5 ì¢… ì¶”ê°€) |
| **Label ìˆ˜** | 27ê°œ | **38ê°œ** |
| **ë‹¤ì¤‘ ë…¼ì¦ êµ¬ì¡°** | supports / contradicts | **argument_unit**, **rebuttal_of**, **conditioned_by** ë“± ì„¸ë¶„í™” |
| **ë©”íƒ€ ê´€ê³„** | ë¶€ì¬ | **stance_on**, **uses_framework** â†’ ê´€ì Â·ë°©ë²•ë¡  í‘œí˜„ |
| **ìˆ˜ëŸ‰ ë¹„êµ** | is_equal_to ë“± 3ê°œ | **delta_is_positive/negative** ì¶”ê°€ â†’ ê¸°ìš¸ê¸°Â·ì¦ê° í‘œí˜„ |
| **ì˜ˆì™¸Â·í•œê³„** | ì—†ìŒ | **has_exception**, **has_scope_limit** |
| **ë¶ˆí™•ì‹¤ì„±** | ì—†ìŒ | **has_probability**, **is_hypothetical** |
| **ë…¸ë“œ ì†ì„±** | id/label ë“± | **tier**(core/support), **discourse_role**(claim/data/warrant) ì¶”ê°€ |
| **JSON ìŠ¤í‚¤ë§ˆ** | ë‹¨ì¼ ë²„ì „ | **$schema** í•„ë“œë¡œ ë²„ì „ ëª…ì‹œ, backward-compatible |

---

#### 3. ì—£ì§€ ìŠ¤í‚¤ë§ˆ v5.0 (ì´ 20 Type / 38 Label)

> **êµµê²Œ**: v5.0 ì‹ ê·œ

| Type | Label (í•„ìˆ˜) | ì„¤ëª…Â·ìš©ë¡€ |
|------|--------------|-----------|
| **Hierarchy** | **is_parent_of**, **is_child_of** | í•™íŒŒÂ·ë²•ì¡°ë¬¸Â·ë¶„ë¥˜ ì²´ê³„ |
| Classification | belongs_to | "ì •ì‹ ë¶„ì„ ì´ë¡  A belongs_to ì‹¬ë¦¬í•™" |
| Definition | defines | "ë„ë• ë¬¸ì¥ defines ì§„ë¦¬ ë¶€ì •" |
| Composition | has_part | "í”Œë¼ìŠ¤í‹± has_part ê²°ì • ì˜ì—­" |
| Property | has_attribute | "ê²½ì˜ ê³µì‹œ has_attribute íˆ¬ëª…ì„±" |
| Comparison | is_similar_to, differs_from | ì² í•™ A vs B ë¹„êµ |
| **QuantComparison** | is_greater_than, is_less_than, is_equal_to, **delta_is_positive/negative** | ì§€ì§€ìœ¨ ì¦ê°€Â·ê°ì†Œ ë“± |
| Causality | causes, influences | "ê³¼ì‚°í™”ë¬¼ ê°œì‹œì œ causes ì´ì¤‘ ê²°í•© íŒŒê´´" |
| **CounterCausality** | **mitigates**, **exacerbates** | "ì‚¬ì™¸ì´ì‚¬ mitigates íì‡„ì  ê²½ì˜" |
| Conditionality | requires, depends_on | "ì¬íŒë§¤ê°€ê²©ìœ ì§€ requires ì •ë‹¹í•œ ì´ìœ " |
| **Exception** | **has_exception**, **has_scope_limit** | ì—¬ë¡ ì¡°ì‚¬ ê³µí‘œ ê¸ˆì§€ ì˜ˆì™¸(ì €ì‘ë¬¼) |
| Temporal | occurs_at, before, after | ì˜¤ì¡´í™€ occurs_at 9-11ì›” |
| Spatial | is_located_at | ì˜¤ì¡´í™€ is_located_at ë‚¨ê·¹ ì„±ì¸µê¶Œ |
| Purpose | has_purpose, functions_as, uses_means | ìŠ¤í†¡ì˜µì…˜ has_purpose ì¸ì„¼í‹°ë¸Œ |
| Example | is_example_of | í´ë¦¬ì—í‹¸ë Œ is_example_of ì—´ê°€ì†Œì„± |
| Reference | refers_to, is_source_of | ë¬¸í—Œ ê°„ ì¸ìš© |
| Evaluation | views_as, has_stance | "ë°”ìŸ has_stance ëª½íƒ€ì£¼ ë¶€ì •" |
| Argumentation | supports, contradicts, **rebuttal_of**, **argument_unit** | ë³µí•© ë…¼ì¦ íŠ¸ë¦¬ |
| **Methodology** | **uses_framework**, **is_derived_from** | "ì²œë‘ìŠˆ uses_framework ê³¼í•™ ì •ì‹ " |
| **Modality** | **is_hypothetical**, **has_probability** | "ì˜¤ì¡´ íšŒë³µ has_probability 0.8 by 2050" |

---

#### 4. ë…¸ë“œ ë©”íƒ€ë°ì´í„° í™•ì¥

| í•„ë“œ | í˜•ì‹ | ì„¤ëª… |
|------|------|------|
| id | string | ê³ ìœ  ID |
| label | string | ì •ê·œí™”ëœ ë‹¨ìˆ˜ ëª…ì‚¬ |
| type | string | concept / process / actor / value ë“± |
| **tier** | core / support | í•µì‹¬ ì±„ì ìš© vs ë°°ê²½ ì •ë³´ |
| **discourse_role** | claim / data / warrant / rebuttal / backing | í†¤í€¸ ëª¨ë¸ ê¸°ë°˜ |
| description | string | (ì„ íƒ) ìš”ì•½ |
| text_span | [int,int] | ì›ë¬¸ ìœ„ì¹˜ |

---

#### 5. JSON Top-Level êµ¬ì¡°

```json
{
  "$schema": "https://kice-graph.org/schema/v5.0",
  "graph_id": "2025_06_section_8_11",
  "document_source": {
    "title": "í”Œë¼ìŠ¤í‹± ì¤‘í•© ê³¼ì •",
    "source_file": "2025_06_section_8_11.txt",
    "sections": ["8","9","10","11"]
  },
  "nodes": [ /* â€¦ */ ],
  "edges": [ /* â€¦ */ ]
}
```

* `$schema` í•„ë“œëŠ” íŒŒì„œê°€ v5.0ì„ ì¸ì‹í•˜ë„ë¡ í•„ìˆ˜.  
* **Backward compatibility** : v4.1 ê·¸ë˜í”„ë¥¼ v5.0 íŒŒì„œëŠ” idempotent ë³€í™˜ ì§€ì›.

---

#### 6. êµ¬ì¶• Workflow (ê³ ë‚œë„ ë²„ì „)  

1. **Micro-chunk íŒŒì‹±** : ë¬¸ë‹¨â†’ë¬¸ì¥â†’ì˜ë¯¸ ë‹¨ìœ„ë¡œ í† í°í™”  
2. **Core claim ì„ ì •** : tier=core í›„ë³´ë§Œ ìš°ì„  ê·¸ë˜í”„í™”  
3. **Multi-hop ì—°ê²°** : ìµœì†Œ 2-hopìœ¼ë¡œ ë‹µì´ êµ¬ì„±ë˜ë„ë¡ ì—£ì§€ ì„¤ê³„  
4. **ë°˜ë¡€Â·ì œí•œ** ë°°ì¹˜ : has_exception / rebuttal_of ì¶”ê°€ â†’ íŒë‹¨í˜•Â·ë³´ê¸°í˜• ì„ ì§€ ì†Œì¬  
5. **ì •ëŸ‰-ì •ì„± ë¯¹ìŠ¤** : QuantComparison + Evaluation í˜¼í•© â†’ 'â–³ë³´ë‹¤ í¬ë‹¤ + ê°€ì¹˜ íŒë‹¨' ì„ ì§€ ì œì‘  
6. **ê²€ì¦ ë¬¸ì¥ ë§í¬** : ëª¨ë“  edge.metadata.supporting_sentence â†’ ì›ë¬¸ exact string  

---

#### 7. ê³ ë‚œë„ ì¶œì œìš© íŒ¨í„´ ê°€ì´ë“œ

| ë¬¸í•­ ìœ í˜• | ê·¸ë˜í”„ íŒ¨í„´ | ì˜ˆì‹œ(ì²¨ë¶€ ê¸°ì¶œ) |
|-----------|-------------|-----------------|
| ë³µí•© ì¶”ë¡ í˜• | causes + has_exception + rebuttal_of | ì˜¤ì¡´í™€ ìƒì„±(ì›ì¸) â†” ì˜¨ì‹¤ê°€ìŠ¤ has_exception (ì„±ì¸µê¶Œ ì˜¨ë„ ìƒìŠ¹ ì‹œ) |
| ì‹œì  ë³€ë™í˜• | before / after + delta_is_positive | ë¶ê·¹ 2011Â·2020 ì˜¤ì¡´ ê°ì†Œ before 2023 |
| ê´€ì  ëŒ€ë¦½í˜• | has_stance (+supports/contradicts) | ë°”ìŸ vs ì •ì‹ ë¶„ì„ ì˜í™” ì´ë¡  |
| ì¡°ê±´ ìœ„ë°°í˜• | requires + contradicts | ë„ë• ë¬¸ì¥ ì§„ë¦¬ê°’ requires ê²€ì¦ ê°€ëŠ¥ â†” ì—ì´ì–´ contradicts |

---

#### 8. í’ˆì§ˆ Checklist (5 í•­)

1. **ê·¼ê±° í¬í•¨ë¥  100 %** : ëª¨ë“  core edgeëŠ” supporting_sentence í•„ìˆ˜  
2. **ë‹¤ì¤‘ ê²½ë¡œ** : ì •ë‹µ ì„ ì§€ëŠ” 2 ì´ìƒ ê²½ë¡œ, ì˜¤ë‹µ ì„ ì§€ëŠ” 1 ê²½ë¡œ or break edge  
3. **ë¶„ê¸° ê· í˜•** : í•œ ë…¸ë“œ degree ìµœëŒ€ 7, ê³¼ë„í•œ ìŠ¤íƒ€ êµ¬ì¡° ê¸ˆì§€  
4. **ìš©ì–´ ì¼ê´€ì„±** : ë™ì¼ ê°œë… label ë™ì¼, ìƒìœ„/í•˜ìœ„ ê´€ê³„ ëª…ì‹œ  
5. **ì˜¤ë¥˜ ë¡œê·¸ 0** : JSON schema validation & unit-test í†µê³¼

---

#### 9. ì˜ˆì‹œ ìŠ¤ë‹ˆí« (v5.0)

```json
{
  "nodes":[
    {"id":"n1","label":"Montage","type":"technique","tier":"core"},
    {"id":"n2","label":"Continuity of Reality","type":"property","tier":"core"},
    {"id":"n3","label":"Bazin","type":"actor","tier":"core","discourse_role":"claim"},
    {"id":"n4","label":"Disruption","type":"effect","tier":"support"}
  ],
  "edges":[
    {"source_id":"n1","target_id":"n2","type":"Comparison","label":"differs_from",
     "metadata":{"supporting_sentence":"ë°”ìŸì€ ëª½íƒ€ì£¼ê°€ í˜„ì‹¤ì˜ ì—°ì†ì„±ì„ ê¹¨ëœ¨ë¦°ë‹¤ê³  ë³´ì•˜ë‹¤."}},
    {"source_id":"n1","target_id":"n4","type":"Causality","label":"causes",
     "metadata":{"supporting_sentence":"ëª½íƒ€ì£¼ëŠ” ê³µê°„ì„ ë¶ˆì—°ì†ì ìœ¼ë¡œ ì—°ê²°í•´ ê´€ê°ì—ê²Œ ìƒì†Œí•œ ëŠë‚Œì„ ì¤€ë‹¤."}},
    {"source_id":"n3","target_id":"n1","type":"Evaluation","label":"views_as",
     "metadata":{"supporting_sentence":"ë°”ìŸì€ ëª½íƒ€ì£¼ê°€ ê´€ê° í•´ì„ì„ ì œí•œí•œë‹¤ê³  ë¹„íŒí–ˆë‹¤."}}
  ]
}